<div [class]="containerClasses()" class="relative">
  <canvas
    #canvas
    [attr.width]="width()"
    [attr.height]="height()"
    class="block"
  ></canvas>

  <!-- Beat Indicator -->
  @if (enableBeatDetection() && showBeatIndicator()) {
    <div class="absolute top-2 right-2 flex items-center gap-2">
      <!-- Beat light -->
      <div
        class="w-3 h-3 rounded-full transition-all duration-75"
        [class.bg-red-500]="isBeatActive()"
        [class.bg-zinc-700]="!isBeatActive()"
        [class.shadow-lg]="isBeatActive()"
        [class.shadow-red-500/50]="isBeatActive()"
        [style.transform]="isBeatActive() ? 'scale(1.3)' : 'scale(1)'"
      ></div>

      <!-- BPM display -->
      @if (currentBpm() > 0) {
        <div class="text-xs font-mono text-white/70 bg-black/50 px-1.5 py-0.5 rounded">
          {{ currentBpm() }} BPM
        </div>
      }
    </div>
  }
</div>




