@if (label) {
  <label [for]="inputId" class="block text-sm font-medium text-slate-700 mb-1.5">
    {{ label }}
    @if (required) {
      <span class="text-rose-500 ml-0.5">*</span>
    }
  </label>
}

<div [class]="wrapperClasses()">
  <!-- Prefix -->
  <ng-content select="[twInputPrefix]"></ng-content>

  <!-- Input element -->
  <input
    #inputElement
    [id]="inputId"
    [type]="type"
    [class]="computedClasses()"
    [placeholder]="placeholder"
    [disabled]="disabled"
    [readonly]="readonly"
    [required]="required"
    [attr.aria-invalid]="hasError"
    [attr.aria-describedby]="describedBy"
    [attr.autocomplete]="autocomplete"
    [attr.inputmode]="inputmode"
    [attr.pattern]="pattern"
    [attr.min]="min"
    [attr.max]="max"
    [attr.minlength]="minlength"
    [attr.maxlength]="maxlength"
    [attr.step]="step"
    [value]="value"
    (input)="onInput($event)"
    (blur)="onBlur()"
    (focus)="onFocus.emit($event)"
  />

  <!-- Suffix -->
  <ng-content select="[twInputSuffix]"></ng-content>

  <!-- Clear button -->
  @if (clearable && value && !disabled && !readonly) {
    <button
      type="button"
      class="flex items-center justify-center w-5 h-5 text-slate-400 hover:text-slate-600 transition-colors"
      (click)="clear()"
      aria-label="Clear input"
    >
      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  }
</div>

@if (hint && !error) {
  <span class="block text-xs text-slate-500 mt-1.5">{{ hint }}</span>
}

@if (error) {
  <span class="block text-xs text-rose-600 mt-1.5" role="alert">{{ error }}</span>
}

<ng-content select="tw-hint, [twHint], tw-error, [twError]"></ng-content>
